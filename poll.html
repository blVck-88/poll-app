<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Election Polling App</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ—³ï¸ Election Polling App</h1>
            <p>Data Collection & Analytics Dashboard</p>
            <small style="opacity: 0.8;">âš ï¸ Note: Data is stored in memory for this demo - export regularly</small>
        </div>

        <div class="nav-tabs">
          <button class="nav-tab active" data-tab="poll" onclick="showTab('poll')">ğŸ“ Data Collection</button>
          <button class="nav-tab" data-tab="dashboard" onclick="showTab('dashboard')">ğŸ“Š Dashboard</button>        </div>

        <div class="tab-content">
            <!-- Poll Collection Form -->
            <div class="form-section active" id="poll-section">
                <h2 style="margin-bottom: 30px; color: #2c3e50;">Interview Data Collection</h2>
                
                <div id="success-alert" class="alert" style="display: none;">
                    âœ… Poll data saved successfully!
                </div>

<form id="pollForm">
  <!-- SECTION: Interview Metadata -->
  <fieldset>
    <legend>ğŸ“ Survey Logistics</legend>
    <div class="form-group">
      <label for="location">Location/Area</label>
      <input type="text" id="location" name="location" required placeholder="e.g. Gatura Market">
    </div>
    <div class="form-group">
      <label for="event">Event or Venue</label>
      <input type="text" id="event" name="event" required placeholder="e.g., Market Square">
    </div>
    <div class="form-group">
      <label for="interviewer">Interviewer Name</label>
      <input type="text" id="interviewer" name="interviewer" required placeholder="Enter your name">
    </div>
  </fieldset>

  <!-- SECTION 1: Voting Intentions & Outcomes -->
  <fieldset>
    <legend>ğŸ—³ï¸ Voting Intentions & Perceived Outcomes</legend>

    <div class="form-group">
      <label>1. If the Mathioya MP elections were held today, who would you vote for?</label>
      <select name="vote_today" required>
        <option value="">-- Select --</option>
        <option value="Kaburi">Kaburi</option>
        <option value="Peter Kimari">Peter Kimari</option>
        <option value="Haniel Njathi">Haniel Njathi</option>
        <option value="Not sure">Iâ€™m not sure</option>
      </select>
    </div>

    <div class="form-group">
      <label>2. How confident are you in your current choice?</label>
      <select name="vote_confidence" required>
        <option value="">-- Select --</option>
        <option value="Very confident">Very confident</option>
        <option value="Somewhat confident">Somewhat confident</option>
        <option value="Not very confident">Not very confident</option>
        <option value="Not sure">Not sure</option>
      </select>
    </div>

    <div class="form-group">
      <label>3. Who do you believe would win the Mathioya MP seat if elections were held today?</label>
      <select name="likely_winner" required>
        <option value="">-- Select --</option>
        <option value="Kaburi">Kaburi</option>
        <option value="Peter Kimari">Peter Kimari</option>
        <option value="Haniel Njathi">Haniel Njathi</option>
        <option value="Not sure">Iâ€™m not sure</option>
      </select>
    </div>
  </fieldset>

  <!-- SECTION 2: Public Image & Perception -->
  <fieldset>
    <legend>ğŸ“£ Candidate Visibility & Perception</legend>

    <div class="form-group">
      <label>4. Which candidate is most visible or active in your area?</label>
      <select name="most_visible" required>
        <option value="">-- Select --</option>
        <option value="Kaburi">Kaburi</option>
        <option value="Peter Kimari">Peter Kimari</option>
        <option value="Haniel Njathi">Haniel Njathi</option>
        <option value="All equally">All equally</option>
        <option value="None">None</option>
        <option value="Not sure">Not sure</option>
      </select>
    </div>

    <div class="form-group">
      <label>5. Whose plans or campaign agenda do you understand best?</label>
      <select name="understand_agenda" required>
        <option value="">-- Select --</option>
        <option value="Kaburi">Kaburi</option>
        <option value="Peter Kimari">Peter Kimari</option>
        <option value="Haniel Njathi">Haniel Njathi</option>
        <option value="None">None</option>
        <option value="Not sure">Not sure</option>
      </select>
    </div>

    <div class="form-group">
      <label>6. Who is most likely to address the real needs of Mathioya residents?</label>
      <select name="most_likely_help" required>
        <option value="">-- Select --</option>
        <option value="Kaburi">Kaburi</option>
        <option value="Peter Kimari">Peter Kimari</option>
        <option value="Haniel Njathi">Haniel Njathi</option>
        <option value="Not sure">Not sure</option>
      </select>
    </div>
  </fieldset>

  <!-- SECTION 3: Candidate Engagement & Outreach -->
  <fieldset>
    <legend>ğŸ“¬ Candidate Engagement & Outreach</legend>

    <div class="form-group">
      <label>7. Have you personally attended any meeting or rally organized by:</label><br>
      <label><input type="checkbox" name="attended[]" value="Kaburi"> Kaburi</label><br>
      <label><input type="checkbox" name="attended[]" value="Peter Kimari"> Peter Kimari</label><br>
      <label><input type="checkbox" name="attended[]" value="Haniel Njathi"> Haniel Njathi</label><br>
      <label><input type="checkbox" name="attended[]" value="None"> None of them</label>
    </div>

    <div class="form-group">
      <label>8. Have you received campaign communication (SMS, call, social media) from:</label><br>
      <label><input type="checkbox" name="received_comms[]" value="Kaburi"> Kaburi</label><br>
      <label><input type="checkbox" name="received_comms[]" value="Peter Kimari"> Peter Kimari</label><br>
      <label><input type="checkbox" name="received_comms[]" value="Haniel Njathi"> Haniel Njathi</label><br>
      <label><input type="checkbox" name="received_comms[]" value="None"> None of them</label>
    </div>
  </fieldset>

  <!-- SECTION 4: Voter Profile -->
  <fieldset>
    <legend>ğŸ§ Voter Profile</legend>

    <div class="form-group">
      <label>9. What is your age group?</label>
      <select name="age_group" required>
        <option value="">-- Select --</option>
        <option value="18â€“24">18â€“24</option>
        <option value="25â€“34">25â€“34</option>
        <option value="35â€“44">35â€“44</option>
        <option value="45â€“54">45â€“54</option>
        <option value="55+">55 and above</option>
      </select>
    </div>

    <div class="form-group">
      <label>10. Are you a registered voter in Mathioya Constituency?</label>
      <select name="registered" required>
        <option value="">-- Select --</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>
    </div>
  </fieldset>

  <!-- SECTION 5: Key Issue -->
  <fieldset>
    <legend>ğŸ” Key Voter Issue</legend>

    <div class="form-group">
      <label>11. What is the most important issue influencing your MP choice?</label>
      <select name="top_issue" required onchange="toggleOtherIssue(this)">
        <option value="">-- Select --</option>
        <option value="Jobs & Youth Empowerment">Jobs & Youth Empowerment</option>
        <option value="Roads & Infrastructure">Roads & Infrastructure</option>
        <option value="Education & Bursaries">Education & Bursaries</option>
        <option value="Healthcare">Healthcare</option>
        <option value="Security">Security</option>
        <option value="Other">Other (please specify)</option>
      </select>
      <input type="text" id="other_issue" name="other_issue" style="display:none;" placeholder="Specify other issue">
    </div>
  </fieldset>

  <!-- Optional Notes -->
  <div class="form-group">
    <label for="notes">ğŸ“ Additional Notes</label>
    <textarea id="notes" name="notes" rows="3" placeholder="Any extra observations or comments"></textarea>
  </div>

  <button type="submit" class="btn">ğŸ’¾ Submit Survey</button>
</form>

<script>
  function toggleOtherIssue(select) {
    const otherInput = document.getElementById("other_issue");
    otherInput.style.display = select.value === "Other" ? "block" : "none";
  }
</script>

<style>
  .form-group {
    margin-bottom: 1rem;
  }

  fieldset {
    border: 1px solid #ccc;
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 1.5rem;
  }

  legend {
    font-weight: bold;
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
  }

  .btn {
    background-color: #007bff;
    color: white;
    padding: 0.6rem 1.2rem;
    border: none;
    border-radius: 6px;
    font-size: 1rem;
    cursor: pointer;
  }

  .btn:hover {
    background-color: #0056b3;
  }
</style>

            </div>

            <!-- Dashboard -->
            <div class="form-section" id="dashboard-section">
                <h2 style="margin-bottom: 30px; color: #2c3e50;">Analytics Dashboard</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="total-polls">0</div>
                        <div class="stat-label">Total Polls</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="locations-count">0</div>
                        <div class="stat-label">Locations Covered</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="leading-candidate">-</div>
                        <div class="stat-label">Leading Candidate</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="chart-container">
                        <h3>ğŸ† Candidate Performance</h3>
                        <canvas id="candidateChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>ğŸ“Š Age Group Breakdown</h3>
                        <canvas id="ageChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>ğŸ“ Location Distribution</h3>
                        <canvas id="locationChart"></canvas>
                    </div>
                </div>

                <div style="margin-top: 30px;">
                    <button class="btn" onclick="exportData()">ğŸ“¥ Export Data (CSV)</button>
                    <button class="btn" onclick="clearAllData()" style="background: #e74c3c; margin-left: 10px;">ğŸ—‘ï¸ Clear All Data</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
        
</body>
</html>